/**
 * Face Builder v1.0.4
 * http://codecanyon.net/user/AramisGC
 * http://www.script-tutorials.com/
 * 
 * Copyright (c) 2013-2014, Andrey Prikaznov
 * All rights reserved.
*/

function sendResultToServer(vData) {
    $('.scene .loading').show();
    $.post(
        website_url + 'accept_avatar.php',
        {
            data: vData
        },
        function(aData) {

            if (aData) {
                $('.result').fadeOut(1000, function () {
                    var result = '<hr /><div class="container"><h2>Result is:</h2><img src="cache/result'+aData+'.jpg" /><button class="button download" onclick="window.open(\'cache/result'+aData+'.jpg\');">download result image</button>'+
                    '<button class="button" onclick="$(\'.send_email\').toggle();">Send by Email</button>'+
                    '<form method="post" action="email.php" class="send_email"><input name="file" value="'+aData+'" type="hidden" />'+
                    '<input class="text" name="name" value="" type="text" placeholder="Your Name" /><input class="text" name="email" value="" type="text" placeholder="Your Email" /><input class="button" type="submit" name="submit" /></form></div>';

                    $(this).html(result);
                    $(this).fadeIn(1000);
                    $('.scene .loading').hide();
                });
            }
        }
    );
}

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('f O,p;f 1z,N;f v,z,A,B,C,D;f s,P,Q,R,S;f 2q=0;g X(){a.t=0;a.b=d l();a.b[1]=d l();a.b[1][0]=[e,e,H];a.b[1][1]=[e,2r,2s];a.b[1][2]=[e,H,0];a.b[2]=d l();a.b[2][0]=[T,1n,e];a.b[2][1]=[10,2t,1o];a.b[2][2]=[1,1O,2u];a.b[3]=d l();a.b[3][0]=[e,1n,0];a.b[3][1]=[e,H,0];a.b[3][2]=[1n,1A,0];a.b[4]=d l();a.b[4][0]=[e,T,0];a.b[4][1]=[1n,1A,0];a.b[4][2]=[1P,2v,0];a.b[5]=d l();a.b[5][0]=[1Q,0,39];a.b[5][1]=[1P,0,32];a.b[5][2]=[1R,0,21];a.b[6]=d l();a.b[6][0]=[1R,0,21];a.b[6][1]=[1p,0,11];a.b[6][2]=[0,0,0];a.b[7]=d l();a.b[7][0]=[2w,H,2x];a.b[7][1]=[2y,2z,2A];a.b[7][2]=[1Q,0,2B];a.b[8]=d l();a.b[8][0]=[2C,0,1S];a.b[8][1]=[2D,0,1B];a.b[8][2]=[1T,0,2E];a.b[9]=d l();a.b[9][0]=[2F,2G,2H];a.b[9][1]=[2I,2J,1U];a.b[9][2]=[2K,1V,2L];a.b[10]=d l();a.b[10][0]=[1l,1W,1l];a.b[10][1]=[1B,32,1B];a.b[10][2]=[1X,23,1X];a.b[11]=d l();a.b[11][0]=[1U,2M,e];a.b[11][1]=[2N,2O,e];a.b[11][2]=[1q,2P,e];a.b[12]=d l();a.b[12][0]=[0,34,H];a.b[12][1]=[0,24,1Y];a.b[12][2]=[0,10,1Z];a.b[13]=d l();a.b[13][0]=[0,2Q,2R];a.b[13][1]=[0,2S,25];a.b[13][2]=[0,T,1q];a.b[14]=d l();a.b[14][0]=[2T,2U,2V];a.b[14][1]=[2W,2X,2Y];a.b[14][2]=[2Z,1T,30];a.b[15]=d l();a.b[15][0]=[0,T,0];a.b[15][1]=[0,1r,0];a.b[15][2]=[0,0,0];a.b[16]=d l();a.b[16][0]=[31,3a,25];a.b[16][1]=[3b,3c,1p];a.b[16][2]=[3d,T,38];a.b[17]=d l();a.b[17][0]=[3e,3f,1p];a.b[17][1]=[1A,3g,37];a.b[17][2]=[35,23,16];a.b[18]=d l();a.b[18][0]=[3h,1W,32];a.b[18][1]=[35,23,16];a.b[18][2]=[0,0,0];a.b[19]=d l();a.b[19][0]=[3i,1O,1Y];a.b[19][1]=[1l,3j,3k];a.b[19][2]=[3l,39,36];a.b[20]=d l();a.b[20][0]=[3m,1C,1C];a.b[20][1]=[3n,1D,1D];a.b[20][2]=[1q,32,32];a.b[21]=d l();a.b[21][0]=[1q,32,32];a.b[21][1]=[33,14,14];a.b[21][2]=[0,0,0];a.b[22]=d l();a.b[22][0]=[H,H,H];a.b[22][1]=[T,T,T];a.b[22][2]=[1r,1r,1r];a.b[23]=d l();a.b[23][0]=[3o,1p,1V];a.b[23][1]=[1Z,33,1D];a.b[23][2]=[0,0,0]}g 26(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 27(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 28(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 29(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 2a(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 2b(x,y,m,o,w,h,k){a.x=x;a.y=y;a.m=m;a.o=o;a.w=w;a.h=h;a.k=k;a.q=0}g 2c(){p.2e(0,0,p.O.1E,p.O.1F);N.2e(0,0,N.O.1E,N.O.1F)}g 2f(){2c();p.Y(v.k,v.m+v.q*v.w,v.o,v.w,v.h,v.x,v.y,v.w,v.h);p.Y(D.k,D.m+D.q*D.w,D.o,D.w,D.h,D.x,D.y,D.w,D.h);E(R.t>0){f j=R.t;f r=p.U(0,2g,u,1S);f c=r.c;Z(f i=0,n=c.1a;i<n;i+=4){E(c[i]<1b&&c[i+1]<1b&&c[i+2]<1b&&c[i]>1c&&c[i+1]>1c&&c[i+2]>1c&&c[i]!=1d&&c[i+1]!=1d&&c[i+2]!=1d){c[i]=(R.b[j][1][0]/e)*c[i];c[i+1]=(R.b[j][1][1]/e)*c[i+1];c[i+2]=(R.b[j][1][2]/e)*c[i+2];c[i+3]=e}}p.V(r,0,2g)}p.Y(A.k,A.m+A.q*A.w,A.o,A.w,A.h,A.x,A.y,A.w,A.h);E(P.t>0){f j=P.t;f r=p.U(0,2h,u,1C);f c=r.c;Z(f i=0,n=c.1a;i<n;i+=4){E(c[i]==e&&c[i+1]==e&&c[i+2]==e){c[i]=(P.b[j][1][0]/e)*c[i];c[i+1]=(P.b[j][1][1]/e)*c[i+1];c[i+2]=(P.b[j][1][2]/e)*c[i+2];c[i+3]=e}}p.V(r,0,2h)}p.Y(B.k,B.m+B.q*B.w,B.o,B.w,B.h,B.x,B.y,B.w,B.h);E(Q.t>0){f j=Q.t;f r=p.U(1l,2i,3p,2j);f c=r.c;Z(f i=0,n=c.1a;i<n;i+=4){E(c[i]<1b&&c[i+1]<1b&&c[i+2]<1b&&c[i]>1c&&c[i+1]>1c&&c[i+2]>1c&&c[i]!=1d&&c[i+1]!=1d&&c[i+2]!=1d){c[i]=(Q.b[j][1][0]/e)*c[i];c[i+1]=(Q.b[j][1][1]/e)*c[i+1];c[i+2]=(Q.b[j][1][2]/e)*c[i+2];c[i+3]=e}}p.V(r,1l,2i)}E(S.t>0){f j=S.t;f r=p.U(3,3,2k,2k);f c=r.c;Z(f i=0,n=c.1a;i<n;i+=4){E(c[i]==1o&&c[i+1]==1o&&c[i+2]==1o){c[i]=(S.b[j][1][0]);c[i+1]=(S.b[j][1][1]);c[i+2]=(S.b[j][1][2]);c[i+3]=e}}p.V(r,2,2)}N.Y(z.k,z.m+z.q*z.w,z.o,z.w,z.h,z.x,z.y,z.w,z.h);E(s.t>0){f j=s.t;f r=N.U(0,0,u,u);f c=r.c;Z(f i=0,n=c.1a;i<n;i+=4){E(c[i]==e&&c[i+1]==e&&c[i+2]==e){c[i]=s.b[j][0][0];c[i+1]=s.b[j][0][1];c[i+2]=s.b[j][0][2];c[i+3]=e}1G E(c[i]==1H&&c[i+1]==1H&&c[i+2]==1H){c[i]=s.b[j][1][0];c[i+1]=s.b[j][1][1];c[i+2]=s.b[j][1][2];c[i+3]=e}1G E(c[i]==H&&c[i+1]==H&&c[i+2]==H){c[i]=s.b[j][2][0];c[i+1]=s.b[j][2][1];c[i+2]=s.b[j][2][2];c[i+3]=e}1G E(c[i]<e&&c[i+1]<e&&c[i+2]<e&&c[i]>1I&&c[i+1]>1I&&c[i+2]>1I){c[i]=(s.b[j][1][0]/e)*c[i];c[i+1]=(s.b[j][1][1]/e)*c[i+1];c[i+2]=(s.b[j][1][2]/e)*c[i+2];c[i+3]=e}}N.V(r,0,0)}p.Y(C.k,C.m+C.q*C.w,C.o,C.w,C.h,C.x,C.y,C.w,C.h)}g 2l(){f 1s,1e;1e=1J.3q(\'O\');1s=1e.1K(\'2d\');1e.1E=1f;1e.1F=1f;f r=p.U(5,5,1f,1f);f c=r.c;1s.V(r,0,0);1L=N.U(5,5,1f,1f);f M=1L.c;Z(f i=0,n=M.1a;i<n;i+=4){E(M[i]==0&&M[i+1]==0&&M[i+2]==0&&M[i+3]==0){M[i]=c[i];M[i+1]=c[i+1];M[i+2]=c[i+2];M[i+3]=e}}1s.V(1L,0,0);f 1M=1e.3r("k/3s",1.0);$(\'#3t\').F(\'W\',1M);3u(1M)}$(g(){O=1J.2m(\'3v\');p=O.1K(\'2d\');1z=1J.2m(\'3w\');N=1z.1K(\'2d\');f 1t=d 1g();1t.W=1h+\'c/3x.1i\';1t.1j=g(){};f 1u=d 1g();1u.W=1h+\'c/1N.1i\';1u.1j=g(){};f 1v=d 1g();1v.W=1h+\'c/3y.1i\';1v.1j=g(){};f 1w=d 1g();1w.W=1h+\'c/3z.1i\';1w.1j=g(){};f 1x=d 1g();1x.W=1h+\'c/3A.1i\';1x.1j=g(){};f 1y=d 1g();1y.W=1h+\'c/3B.1i\';1y.1j=g(){};s=d X();P=d X();Q=d X();R=d X();S=d X();v=d 26(0,0,0,0,u,u,1w);z=d 27(0,0,0,0,u,u,1x);B=d 28(0,0,0,0,u,u,1t);A=d 29(0,0,0,0,u,u,1u);C=d 2a(0,0,0,0,u,u,1v);D=d 2b(0,0,0,0,u,u,1y);3C(2f,2j);$(\'#2n .1m .I J\').G(g(){B.q=K($(a).F(\'L\'))});$(\'#1N .1m .I J\').G(g(){A.q=K($(a).F(\'L\'))});$(\'#3D .1m .I J\').G(g(){C.q=K($(a).F(\'L\'))});$(\'#2o .1m .I J\').G(g(){D.q=K($(a).F(\'L\'))});$(\'#2p .1m .I J\').G(g(){z.q=K($(a).F(\'L\'))});$(\'#3E .1k .I J\').G(g(){v.q=K($(a).F(\'L\'))});$(\'#2p .1k .I J\').G(g(){s.t=K($(a).F(\'L\'))});$(\'#1N .1k .I J\').G(g(){P.t=K($(a).F(\'L\'))});$(\'#2o .1k .I J\').G(g(){R.t=K($(a).F(\'L\'))});$(\'#2n .1k .I J\').G(g(){Q.t=K($(a).F(\'L\'))});$(\'#3F .1k .I J\').G(g(){S.t=K($(a).F(\'L\'))});$(\'#3G 3H\').G(g(){2l()})});',62,230,'||||||||||this|aSets|data|new|255|var|function|||iCp|image|Array|x2||y2|ctx|iSpr|zdata|oColors|iPos|340|oHead||||oFringe|oEyebrow|oEye|oMouth|oTop|if|attr|click|153|set|div|parseInt|val|data2|ctx2|canvas|oColorEyebrow|oColorEye|oColorTop|oColorBack|102|getImageData|putImageData|src|Colors|drawImage|for|||||||||||length|253|120|218|temp_canvas|330|Image|website_url|png|onload|color|90|type|204|254|53|74|51|temp_ctx|oEyesImage|oEyebrowImage|oMouthsImage|oFaceImage|oFringeImage|oTopsImage|canvas2|82|62|60|41|width|height|else|195|58|document|getContext|zdata2|vData|eyebrow|107|157|198|106|88|113|202|56|46|47|98|40||||||109|Head|Fringe|Eye|Eyebrow|Mouth|Top|clear||clearRect|drawScene|252|110|130|100|335|exportResult|getElementById|eye|top|fringe|iSel|211|81|169|186|63|230|177|215|91|132|79|221|155|45|210|168|219|188|125|124|139|228|147|201|165|213|154|151|172|206|121|131|175|65|85|43|216|||||||||173|200|141|145|115|77|54|68|134|73|67|49|138|97|64|160|createElement|toDataURL|jpeg|face_result|sendResultToServer|scene|scene2|eyes|mouths|face|fringes|tops|setInterval|mouth|skin|back|generate|button'.split('|'),0,{}))